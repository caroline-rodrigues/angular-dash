{"version":3,"sources":["webpack:///./src/app/rent/rent.component.html","webpack:///./src/app/rent/rent.component.ts","webpack:///./src/app/rent/rent.module.ts","webpack:///./src/app/rent/rent.routing.ts"],"names":[],"mappings":"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","file":"rent-rent-module.js","sourcesContent":["module.exports = \"<div class=\\\"main-content\\\">\\n  <div class=\\\"container-fluid\\\">\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-md-12\\\">\\n        <div class=\\\"card\\\" style=\\\"padding: 0.5rem\\\">\\n          <div class=\\\"header\\\">\\n            <div style=\\\"display: flex; justify-content: space-between\\\">\\n              <h4 class=\\\"title\\\">Aluguel</h4>\\n              <button\\n                class=\\\"btn btn-success btn-fill btn-wd\\\"\\n                routerLink=\\\"/components/new-rent\\\"\\n              >\\n                Novo Aluguel\\n              </button>\\n            </div>\\n            <form role=\\\"search\\\" style=\\\"padding-top: 1rem\\\">\\n              <div class=\\\"input-group\\\">\\n                <input\\n                  type=\\\"text\\\"\\n                  value=\\\"\\\"\\n                  class=\\\"form-control w-100\\\"\\n                  placeholder=\\\"Buscar...\\\"\\n                  [(ngModel)]=\\\"searchQuery\\\"\\n                  name=\\\"search\\\"\\n                  (input)=\\\"filterItems()\\\"\\n                />\\n                <span class=\\\"input-group-addon\\\">\\n                  <i class=\\\"fa fa-search\\\"></i>\\n                </span>\\n              </div>\\n            </form>\\n          </div>\\n          <div class=\\\"content table-responsive table-full-width\\\">\\n            <table class=\\\"table\\\">\\n              <thead>\\n                <tr>\\n                  <th class=\\\"text-center\\\">{{ headerRow[0] }}</th>\\n                  <th class=\\\"text-center\\\">{{ headerRow[1] }}</th>\\n                  <th class=\\\"text-center\\\">{{ headerRow[2] }}</th>\\n                  <th class=\\\"text-center\\\">{{ headerRow[3] }}</th>\\n                  <th class=\\\"text-center\\\">{{ headerRow[4] }}</th>\\n                  <th class=\\\"text-center\\\">{{ headerRow[5] }}</th>\\n                  <th class=\\\"text-center\\\">{{ headerRow[6] }}</th>\\n                </tr>\\n              </thead>\\n              <tbody>\\n                <tr *ngFor=\\\"let row of filteredRows\\\">\\n                  <td class=\\\"text-center\\\">{{ row?.rent?._id }}</td>\\n                  <td class=\\\"text-center\\\">{{ row?.client?.name }}</td>\\n                  <td class=\\\"text-center\\\">{{ row?.client?.cpf }}</td>\\n                  <td class=\\\"text-center\\\">{{ row?.rent?.endDate }}</td>\\n                  <td class=\\\"text-center\\\">{{ row?.vehicle?.brand }}</td>\\n                  <td class=\\\"text-center\\\">{{ row?.rent?.situation }}</td>\\n                  <td class=\\\"td-actions text-center\\\">\\n                    <button\\n                      rel=\\\"tooltip\\\"\\n                      title=\\\"Edit Profile\\\"\\n                      class=\\\"btn btn-success btn-simple btn-xs\\\"\\n                      (click)=\\\"editRent(row?.rent?._id)\\\"\\n                    >\\n                      <i class=\\\"fa fa-edit\\\"></i>\\n                    </button>\\n                    <button\\n                      rel=\\\"tooltip\\\"\\n                      title=\\\"Remove\\\"\\n                      class=\\\"btn btn-danger btn-simple btn-xs\\\"\\n                      (click)=\\\"onDeletedRent(row?.rent?._id)\\\"\\n                    >\\n                      <i class=\\\"fa fa-times\\\"></i>\\n                    </button>\\n                  </td>\\n                </tr>\\n              </tbody>\\n            </table>\\n          </div>\\n          <div style=\\\"display: flex; justify-content: center\\\">\\n            <ul class=\\\"pagination\\\">\\n              <li\\n                [class.disabled]=\\\"currentPage === 1\\\"\\n                (click)=\\\"changePage(currentPage - 1)\\\"\\n              >\\n                <a><<</a>\\n              </li>\\n              <li\\n                [class.active]=\\\"currentPage === page\\\"\\n                *ngFor=\\\"let page of totalPagesArray\\\"\\n              >\\n                <a (click)=\\\"changePage(page)\\\">{{ page }}</a>\\n              </li>\\n              <li\\n                [class.disabled]=\\\"currentPage === totalPages\\\"\\n                (click)=\\\"changePage(currentPage + 1)\\\"\\n              >\\n                <a>>></a>\\n              </li>\\n            </ul>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","import { Component, EventEmitter, OnInit, Output } from \"@angular/core\";\nimport { Rent } from \"./rent\";\nimport { RentService } from \"./rent.service\";\nimport { debounceTime, distinctUntilChanged, map } from \"rxjs/operators\";\nimport { Subject } from \"rxjs\";\nimport { Router } from \"@angular/router\";\n\ndeclare interface TableData {\n  headerRow: string[];\n  dataRows: string[][];\n}\n\ninterface Row {\n  rent?: {\n    _id: string;\n    endDate: string;\n    situation: string;\n  };\n  client?: {\n    name: string;\n    cpf: string;\n  };\n  vehicle?: {\n    brand: string;\n  };\n}\n\n@Component({\n  moduleId: module.id,\n  selector: \"rent-cmp\",\n  templateUrl: \"./rent.component.html\",\n})\nexport class RentComponent implements OnInit {\n  currentPage: number = 1;\n  itemsPerPage: number = 10;\n  pagesToShow: number = 3;\n  searchQuery: string;\n  totalPages: number;\n  filteredRows: any[];\n  totalPagesArray: any[] = [];\n  rows: Row[];\n  rentList: any[] = [];\n  headerRow: string[] = [\n    \"ID\",\n    \"Nome\",\n    \"CPF\",\n    \"Data devolução\",\n    \"Modelo\",\n    \"Situação\",\n    \"Ações\",\n  ];\n\n  constructor(private rentService: RentService, private router: Router) {}\n\n  ngOnInit() {\n    this.getAll(false);\n  }\n\n  paginate(data: any[]): any[] {\n    const startIndex = (this.currentPage - 1) * this.itemsPerPage;\n    const endIndex = startIndex + this.itemsPerPage;\n    return data.slice(startIndex, endIndex);\n  }\n\n  // findAllRent() {\n  //   this.rentService\n  //     .getAll()\n  //     .pipe(map((rentResponse) => rentResponse.filteredEntityResults))\n  //     .subscribe((rent) => {\n  //       this.rentList = rent;\n  //       this.filteredRows = this.paginate(this.rentList);\n  //       this.totalPages = Math.ceil(this.rentList.length / this.itemsPerPage);\n  //     });\n  // }\n\n  getAll(event: boolean) {\n    this.rentService\n      .getAll()\n      .pipe(map((rentResponse) => rentResponse.filteredEntityResults))\n      .subscribe((rentList) => {\n        this.rentList = rentList;\n        this.totalPages = Math.ceil(this.rentList.length / this.itemsPerPage);\n\n        if (event && this.filteredRows.length === 1 && this.currentPage !== 1) {\n          this.currentPage = this.totalPages;\n        }\n\n        this.filteredRows = this.paginate(this.rentList);\n        this.totalPagesArray = this.calculateTotalPagesArray(\n          this.currentPage,\n          this.totalPages\n        );\n      });\n  }\n\n  calculateTotalPagesArray(currentPage: number, totalPages: number): number[] {\n    const pagesArray: number[] = [];\n    const startPage = Math.max(1, currentPage - this.pagesToShow);\n    const endPage = Math.min(totalPages, currentPage + this.pagesToShow);\n\n    for (let i = startPage; i <= endPage; i++) {\n      pagesArray.push(i);\n    }\n    return pagesArray;\n  }\n\n  changePage(page: number): void {\n    if (page >= 1 && page <= this.totalPages) {\n      this.currentPage = page;\n      this.filteredRows = this.paginate(this.rentList);\n      this.totalPagesArray = this.calculateTotalPagesArray(\n        this.currentPage,\n        this.totalPages\n      );\n    }\n  }\n\n  onDeletedRent(rentId: string) {\n    this.rentService.delete(rentId).subscribe(() => {\n      this.getAll(true);\n    });\n  }\n\n  editRent(rentId: string): void {\n    this.router.navigate([\"/components/new-rent\"], {\n      queryParams: { id: rentId },\n    });\n  }\n\n  filterItems() {\n    console.log(this.searchQuery);\n    this.filteredRows = this.paginate(this.rentList).filter((rent) => {\n      const { _id, endDate } = rent.rent;\n      const { name, cpf } = rent.client;\n      const contentString = `${_id}${name}${cpf}${endDate}`;\n      console.log(contentString);\n      return contentString\n        .toString()\n        .toLowerCase()\n        .includes(this.searchQuery.toLowerCase());\n    });\n  }\n}\n","import { CommonModule } from \"@angular/common\";\nimport { NgModule } from \"@angular/core\";\nimport { FormsModule } from \"@angular/forms\";\nimport { RouterModule } from \"@angular/router\";\nimport { RentComponent } from \"./rent.component\";\nimport { RentRoutes } from \"./rent.routing\";\n\n@NgModule({\n  imports: [CommonModule, RouterModule.forChild(RentRoutes), FormsModule],\n\n  declarations: [RentComponent],\n})\nexport class RentModule {}\n","import { Routes } from \"@angular/router\";\nimport { RentComponent } from \"./rent.component\";\n\nexport const RentRoutes: Routes = [\n  {\n    path: \"\",\n    children: [\n      {\n        path: \"\",\n        component: RentComponent,\n      },\n    ],\n  },\n];\n"],"sourceRoot":""}